<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Polyfill for Flake8 Plugins &#8212; FC 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../../../index.html">
          FC</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Tópicos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../codigofonte.html">Documentação do código-fonte</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Polyfill for Flake8 Plugins</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#option-handling">Option Handling</a></li>
<li><a class="reference internal" href="#retrieving-standard-in">Retrieving Standard In</a></li>
<li><a class="reference internal" href="#version-comparison">Version Comparison</a></li>
</ul>
</li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#creator">Creator</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../../../_sources/venv/lib/python3.6/site-packages/flake8_polyfill-1.0.2.dist-info/DESCRIPTION.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="polyfill-for-flake8-plugins">
<h1>Polyfill for Flake8 Plugins<a class="headerlink" href="#polyfill-for-flake8-plugins" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">flake8-polyfill</span></code> is a package that provides some compatibility helpers for
Flake8 plugins that intend to support Flake8 2.x and 3.x simultaneously.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install flake8-polyfill
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="option-handling">
<h3>Option Handling<a class="headerlink" href="#option-handling" title="Permalink to this headline">¶</a></h3>
<p>One problem area with compatibility with Flake8 2.x and 3.x is the registering
options and receiving the parsed values.</p>
<p>Flake8 3.0 added extra parameters to the <code class="docutils literal notranslate"><span class="pre">add_option</span></code> method which don’t
have the same effect on Flake8 2.x. To accomodate the change, this polyfill
module allows you to do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flake8_polyfill</span> <span class="kn">import</span> <span class="n">options</span>

<span class="k">class</span> <span class="nc">MyFlake8Plugin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
        <span class="n">options</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s1">&#39;--my-long-option-name&#39;</span><span class="p">,</span>
                         <span class="n">parse_from_config</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                         <span class="n">comma_separated_list</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                         <span class="n">default</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">,</span>
                         <span class="n">help</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;--my-other-long-option-name&#39;</span><span class="p">,</span>
                         <span class="n">parse_from_config</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                         <span class="n">normalize_paths</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                         <span class="n">default</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">,</span>
                         <span class="n">help</span><span class="o">=</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parse_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">my_long_option_name</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">my_long_option_name</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">my_other_long_option_name</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">my_other_long_option_name</span>
</pre></div>
</div>
<p>And have the code work the same way on both versions.</p>
</div>
<div class="section" id="retrieving-standard-in">
<h3>Retrieving Standard In<a class="headerlink" href="#retrieving-standard-in" title="Permalink to this headline">¶</a></h3>
<p>Until Flake8 2.6, getting the code on standard in from a plugin has been
simple:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pep8</span>

<span class="n">stdin</span> <span class="o">=</span> <span class="n">pep8</span><span class="o">.</span><span class="n">get_stdin_value</span><span class="p">()</span>
</pre></div>
</div>
<p>In 2.6 you now have to know whether to use <code class="docutils literal notranslate"><span class="pre">pep8</span></code> or <code class="docutils literal notranslate"><span class="pre">pycodestyle</span></code> since
Flake8 2.6 made a hard change to <code class="docutils literal notranslate"><span class="pre">pycodestyle</span></code>.</p>
<p>The reason you need to know which module to use is because standard in can be
exhausted and Flake8 does some work to cache the value so that call always
returns the desired data.</p>
<p>In 3.0, Flake8 no longer monkey-patches those modules.</p>
<p>To accommodate this, this package provides:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flake8_polyfill</span> <span class="kn">import</span> <span class="n">stdin</span>

<span class="n">stdin</span><span class="o">.</span><span class="n">monkey_patch</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">stdin</span><span class="o">.</span><span class="n">monkey_patch</span><span class="p">(</span><span class="s1">&#39;pep8&#39;</span><span class="p">)</span>
<span class="n">stdin</span><span class="o">.</span><span class="n">monkey_patch</span><span class="p">(</span><span class="s1">&#39;pycodestyle&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This allows you to have the polyfill module monkey-patch what you want so it
is always monkey-patched. It will also do so in an intelligent way.</p>
</div>
<div class="section" id="version-comparison">
<h3>Version Comparison<a class="headerlink" href="#version-comparison" title="Permalink to this headline">¶</a></h3>
<p>Flake8 2.x did not include an object that would allow for easy version
comparison. Flake8 3.0, however, added a <code class="docutils literal notranslate"><span class="pre">__version_info__</span></code> attribute. For
consistency, Flake8 Polyfill will turn 2.x’s version string into a tuple
suitable for comparison.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flake8_polyfill</span> <span class="kn">import</span> <span class="n">version</span>

<span class="k">if</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">version</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="c1"># ...</span>
<span class="k">elif</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">version</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
    <span class="c1"># ...</span>
<span class="k">elif</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">version</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT</p>
</div>
<div class="section" id="creator">
<h2>Creator<a class="headerlink" href="#creator" title="Permalink to this headline">¶</a></h2>
<p>Ian Cordasco</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Adauto Nóbrega.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>