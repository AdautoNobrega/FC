<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>aniso8601 &#8212; FC 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../../../index.html">
          FC</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Tópicos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../codigofonte.html">Documentação do código-fonte</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">aniso8601</a><ul>
<li><a class="reference internal" href="#another-iso-8601-parser-for-python">Another ISO 8601 parser for Python</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#use">Use</a><ul>
<li><a class="reference internal" href="#parsing-datetimes">Parsing datetimes</a></li>
<li><a class="reference internal" href="#parsing-dates">Parsing dates</a></li>
<li><a class="reference internal" href="#parsing-times">Parsing times</a></li>
<li><a class="reference internal" href="#parsing-durations">Parsing durations</a></li>
<li><a class="reference internal" href="#parsing-intervals">Parsing intervals</a></li>
<li><a class="reference internal" href="#date-and-time-resolution">Date and time resolution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#development">Development</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributing">Contributing</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../../../_sources/venv/lib/python3.6/site-packages/aniso8601-3.0.0.dist-info/DESCRIPTION.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="aniso8601">
<h1>aniso8601<a class="headerlink" href="#aniso8601" title="Permalink to this headline">¶</a></h1>
<div class="section" id="another-iso-8601-parser-for-python">
<h2>Another ISO 8601 parser for Python<a class="headerlink" href="#another-iso-8601-parser-for-python" title="Permalink to this headline">¶</a></h2>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pure Python implementation</li>
<li>Python 3 support</li>
<li>Logical behavior<ul>
<li>Parse a time, get a <a class="reference external" href="http://docs.python.org/2/library/datetime.html#datetime.time">datetime.time</a></li>
<li>Parse a date, get a <a class="reference external" href="http://docs.python.org/2/library/datetime.html#datetime.date">datetime.date</a></li>
<li>Parse a datetime, get a <a class="reference external" href="http://docs.python.org/2/library/datetime.html#datetime.datetime">datetime.datetime</a></li>
<li>Parse a duration, get a <a class="reference external" href="http://docs.python.org/2/library/datetime.html#datetime.timedelta">datetime.timedelta</a></li>
<li>Parse an interval, get a tuple of dates or datetimes</li>
<li>Parse a repeating interval, get a date or datetime <a class="reference external" href="http://www.python.org/dev/peps/pep-0255/">generator</a></li>
</ul>
</li>
<li>UTC offset represented as fixed-offset tzinfo</li>
<li>Optional <a class="reference external" href="http://dateutil.readthedocs.io/en/latest/relativedelta.html">dateutil.relativedelta</a> support for calendar accuracy</li>
<li>No regular expressions</li>
</ul>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>The recommended installation method is to use pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install aniso8601
</pre></div>
</div>
<p>Alternatively, you can download the source (git repository hosted at <a class="reference external" href="https://bitbucket.org/nielsenb/aniso8601">Bitbucket</a>) and install directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="use">
<h3>Use<a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h3>
<div class="section" id="parsing-datetimes">
<h4>Parsing datetimes<a class="headerlink" href="#parsing-datetimes" title="Permalink to this headline">¶</a></h4>
<p>To parse a typical ISO 8601 datetime string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_datetime</span><span class="p">(</span><span class="s1">&#39;1977-06-10T12:00:00Z&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(1977, 6, 10, 12, 0, tzinfo=+0:00:00 UTC)</span>
</pre></div>
</div>
<p>Alternative delimiters can be specified, for example, a space:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_datetime</span><span class="p">(</span><span class="s1">&#39;1977-06-10 12:00:00Z&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(1977, 6, 10, 12, 0, tzinfo=+0:00:00 UTC)</span>
</pre></div>
</div>
<p>UTC offsets are supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_datetime</span><span class="p">(</span><span class="s1">&#39;1979-06-05T08:00:00-08:00&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(1979, 6, 5, 8, 0, tzinfo=-8:00:00 UTC)</span>
</pre></div>
</div>
<p>If a UTC offset is not specified, the returned datetime will be naive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_datetime</span><span class="p">(</span><span class="s1">&#39;1983-01-22T08:00:00&#39;</span><span class="p">)</span>
<span class="go">datetime.datetime(1983, 1, 22, 8, 0)</span>
</pre></div>
</div>
<p>Leap seconds are currently not supported and attempting to parse one raises a <code class="code docutils literal notranslate"><span class="pre">LeapSecondError</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_datetime</span><span class="p">(</span><span class="s1">&#39;2018-03-06T23:59:60&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">127</span>, in <span class="n">parse_datetime</span>
    <span class="n">timepart</span> <span class="o">=</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">isotimestr</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">110</span>, in <span class="n">parse_time</span>
    <span class="k">return</span> <span class="n">_parse_time_naive</span><span class="p">(</span><span class="n">timestr</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">140</span>, in <span class="n">_parse_time_naive</span>
    <span class="k">return</span> <span class="n">_RESOLUTION_MAP</span><span class="p">[</span><span class="n">get_time_resolution</span><span class="p">(</span><span class="n">timestr</span><span class="p">)](</span><span class="n">timestr</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">214</span>, in <span class="n">_parse_second_time</span>
    <span class="k">raise</span> <span class="n">LeapSecondError</span><span class="p">(</span><span class="s1">&#39;Leap seconds are not supported.&#39;</span><span class="p">)</span>
<span class="gr">aniso8601.exceptions.LeapSecondError</span>: <span class="n">Leap seconds are not supported.</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-dates">
<h4>Parsing dates<a class="headerlink" href="#parsing-dates" title="Permalink to this headline">¶</a></h4>
<p>To parse a date represented in an ISO 8601 string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s1">&#39;1984-04-23&#39;</span><span class="p">)</span>
<span class="go">datetime.date(1984, 4, 23)</span>
</pre></div>
</div>
<p>Basic format is supported as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s1">&#39;19840423&#39;</span><span class="p">)</span>
<span class="go">datetime.date(1984, 4, 23)</span>
</pre></div>
</div>
<p>To parse a date using the ISO 8601 week date format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s1">&#39;1986-W38-1&#39;</span><span class="p">)</span>
<span class="go">datetime.date(1986, 9, 15)</span>
</pre></div>
</div>
<p>To parse an ISO 8601 ordinal date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s1">&#39;1988-132&#39;</span><span class="p">)</span>
<span class="go">datetime.date(1988, 5, 11)</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-times">
<h4>Parsing times<a class="headerlink" href="#parsing-times" title="Permalink to this headline">¶</a></h4>
<p>To parse a time formatted as an ISO 8601 string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;11:31:14&#39;</span><span class="p">)</span>
<span class="go">datetime.time(11, 31, 14)</span>
</pre></div>
</div>
<p>As with all of the above, basic format is supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;113114&#39;</span><span class="p">)</span>
<span class="go">datetime.time(11, 31, 14)</span>
</pre></div>
</div>
<p>A UTC offset can be specified for times:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;17:18:19-02:30&#39;</span><span class="p">)</span>
<span class="go">datetime.time(17, 18, 19, tzinfo=-2:30:00 UTC)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;171819Z&#39;</span><span class="p">)</span>
<span class="go">datetime.time(17, 18, 19, tzinfo=+0:00:00 UTC)</span>
</pre></div>
</div>
<p>Reduced accuracy is supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;21:42&#39;</span><span class="p">)</span>
<span class="go">datetime.time(21, 42)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;22&#39;</span><span class="p">)</span>
<span class="go">datetime.time(22, 0)</span>
</pre></div>
</div>
<p>A decimal fraction is always allowed on the lowest order element of an ISO 8601 formatted time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;22:33.5&#39;</span><span class="p">)</span>
<span class="go">datetime.time(22, 33, 30)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;23.75&#39;</span><span class="p">)</span>
<span class="go">datetime.time(23, 45)</span>
</pre></div>
</div>
<p>Leap seconds are currently not supported and attempting to parse one raises a <code class="code docutils literal notranslate"><span class="pre">LeapSecondError</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_time</span><span class="p">(</span><span class="s1">&#39;23:59:60&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">110</span>, in <span class="n">parse_time</span>
    <span class="k">return</span> <span class="n">_parse_time_naive</span><span class="p">(</span><span class="n">timestr</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">140</span>, in <span class="n">_parse_time_naive</span>
    <span class="k">return</span> <span class="n">_RESOLUTION_MAP</span><span class="p">[</span><span class="n">get_time_resolution</span><span class="p">(</span><span class="n">timestr</span><span class="p">)](</span><span class="n">timestr</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/time.py&quot;</span>, line <span class="m">214</span>, in <span class="n">_parse_second_time</span>
    <span class="k">raise</span> <span class="n">LeapSecondError</span><span class="p">(</span><span class="s1">&#39;Leap seconds are not supported.&#39;</span><span class="p">)</span>
<span class="gr">aniso8601.exceptions.LeapSecondError</span>: <span class="n">Leap seconds are not supported.</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-durations">
<h4>Parsing durations<a class="headerlink" href="#parsing-durations" title="Permalink to this headline">¶</a></h4>
<p>To parse a duration formatted as an ISO 8601 string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1Y2M3DT4H54M6S&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(428, 17646)</span>
</pre></div>
</div>
<p>Reduced accuracy is supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1Y&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(365)</span>
</pre></div>
</div>
<p>A decimal fraction is allowed on the lowest order element:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1YT3.5M&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(365, 210)</span>
</pre></div>
</div>
<p>The decimal fraction can be specified with a comma instead of a full-stop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1YT3,5M&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(365, 210)</span>
</pre></div>
</div>
<p>Parsing a duration from a combined date and time is supported as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P0001-01-02T01:30:5&#39;</span><span class="p">)</span>
<span class="go">datetime.timedelta(397, 5405)</span>
</pre></div>
</div>
<p>The above treat years as 365 days and months as 30 days. If calendar level accuracy is required, the relative keyword argument can be used if <a class="reference external" href="https://pypi.python.org/pypi/python-dateutil">python-dateutil</a> is installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_month</span> <span class="o">=</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1M&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">one_month</span>
<span class="go">relativedelta(months=+1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">27</span><span class="p">)</span> <span class="o">+</span> <span class="n">one_month</span>
<span class="go">datetime.date(2003, 2, 27)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span> <span class="o">+</span> <span class="n">one_month</span>
<span class="go">datetime.date(2003, 2, 28)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span> <span class="o">+</span> <span class="n">two_months</span>
<span class="go">datetime.date(2003, 3, 31)</span>
</pre></div>
</div>
<p>Since a relative fractional month or year is not logical, a <code class="code docutils literal notranslate"><span class="pre">RelativeValueError</span></code> is raised when attempting to parse a duration with <code class="code docutils literal notranslate"><span class="pre">relative=True</span></code> and fractional month or year:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P2.1Y&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">29</span>, in <span class="n">parse_duration</span>
    <span class="k">return</span> <span class="n">_parse_duration_prescribed</span><span class="p">(</span><span class="n">isodurationstr</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">73</span>, in <span class="n">_parse_duration_prescribed</span>
    <span class="k">raise</span> <span class="n">RelativeValueError</span><span class="p">(</span><span class="s1">&#39;Fractional months and years are not defined for relative intervals.&#39;</span><span class="p">)</span>
<span class="gr">aniso8601.exceptions.RelativeValueError</span>: <span class="n">Fractional months and years are not defined for relative intervals.</span>
</pre></div>
</div>
<p>If <code class="code docutils literal notranslate"><span class="pre">relative=True</span></code> is set without python-dateutil available, a <code class="code docutils literal notranslate"><span class="pre">RuntimeError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_duration</span><span class="p">(</span><span class="s1">&#39;P1M&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">29</span>, in <span class="n">parse_duration</span>
    <span class="k">return</span> <span class="n">_parse_duration_prescribed</span><span class="p">(</span><span class="n">isodurationstr</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">77</span>, in <span class="n">_parse_duration_prescribed</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;dateutil must be installed for relative duration support.&#39;</span><span class="p">)</span>
<span class="gr">RuntimeError</span>: <span class="n">dateutil must be installed for relative duration support</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-intervals">
<h4>Parsing intervals<a class="headerlink" href="#parsing-intervals" title="Permalink to this headline">¶</a></h4>
<p>To parse an interval specified by a start and end:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">aniso8601</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2007-03-01T13:00:00/2008-05-11T15:30:00&#39;</span><span class="p">)</span>
<span class="go">(datetime.datetime(2007, 3, 1, 13, 0), datetime.datetime(2008, 5, 11, 15, 30))</span>
</pre></div>
</div>
<p>Intervals specified by a start time and a duration are supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2007-03-01T13:00:00Z/P1Y2M10DT2H30M&#39;</span><span class="p">)</span>
<span class="go">(datetime.datetime(2007, 3, 1, 13, 0, tzinfo=+0:00:00 UTC), datetime.datetime(2008, 5, 9, 15, 30, tzinfo=+0:00:00 UTC))</span>
</pre></div>
</div>
<p>A duration can also be specified by a duration and end time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;P1M/1981-04-05&#39;</span><span class="p">)</span>
<span class="go">(datetime.date(1981, 4, 5), datetime.date(1981, 3, 6))</span>
</pre></div>
</div>
<p>Notice that the result of the above parse is not in order from earliest to latest. If sorted intervals are required, simply use the <code class="code docutils literal notranslate"><span class="pre">sorted</span></code> keyword as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;P1M/1981-04-05&#39;</span><span class="p">))</span>
<span class="go">[datetime.date(1981, 3, 6), datetime.date(1981, 4, 5)]</span>
</pre></div>
</div>
<p>The end of an interval is given as a datetime when required to maintain the resolution specified by a duration, even if the duration start is given as a date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2014-11-12/PT4H54M6.5S&#39;</span><span class="p">)</span>
<span class="go">(datetime.date(2014, 11, 12), datetime.datetime(2014, 11, 12, 4, 54, 6, 500000))</span>
</pre></div>
</div>
<p>Repeating intervals are supported as well, and return a generator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R3/1981-04-05/P1D&#39;</span><span class="p">)</span>
<span class="go">&lt;generator object date_generator at 0x7f698cdefc80&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R3/1981-04-05/P1D&#39;</span><span class="p">))</span>
<span class="go">[datetime.date(1981, 4, 5), datetime.date(1981, 4, 6), datetime.date(1981, 4, 7)]</span>
</pre></div>
</div>
<p>Repeating intervals are allowed to go in the reverse direction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R2/PT1H2M/1980-03-05T01:01:00&#39;</span><span class="p">))</span>
<span class="go">[datetime.datetime(1980, 3, 5, 1, 1), datetime.datetime(1980, 3, 4, 23, 59)]</span>
</pre></div>
</div>
<p>Unbounded intervals are also allowed (Python 2):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R/PT1H2M/1980-03-05T01:01:00&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">datetime.datetime(1980, 3, 5, 1, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">datetime.datetime(1980, 3, 4, 23, 59)</span>
</pre></div>
</div>
<p>or for Python 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R/PT1H2M/1980-03-05T01:01:00&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">datetime.datetime(1980, 3, 5, 1, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">datetime.datetime(1980, 3, 4, 23, 59)</span>
</pre></div>
</div>
<p>Note that you should never try to convert a generator produced by an unbounded interval to a list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_repeating_interval</span><span class="p">(</span><span class="s1">&#39;R/PT1H2M/1980-03-05T01:01:00&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/interval.py&quot;</span>, line <span class="m">161</span>, in <span class="n">_date_generator_unbounded</span>
    <span class="n">currentdate</span> <span class="o">+=</span> <span class="n">timedelta</span>
<span class="gr">OverflowError</span>: <span class="n">date value out of range</span>
</pre></div>
</div>
<p>The above treat years as 365 days and months as 30 days. If calendar level accuracy is required, the relative keyword argument can be used if <a class="reference external" href="https://pypi.python.org/pypi/python-dateutil">python-dateutil</a> is installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2003-01-27/P1M&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(datetime.date(2003, 1, 27), datetime.date(2003, 2, 27))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2003-01-31/P1M&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(datetime.date(2003, 1, 31), datetime.date(2003, 2, 28))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;P1Y/2001-02-28&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(datetime.date(2001, 2, 28), datetime.date(2000, 2, 28)</span>
</pre></div>
</div>
<p>Fractional years and months do not make sense for relative intervals. A <code class="code docutils literal notranslate"><span class="pre">RelativeValueError</span></code> is raised when attempting to parse an interval with <code class="code docutils literal notranslate"><span class="pre">relative=True</span></code> and a fractional month or year:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;P1.1Y/2001-02-28&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/interval.py&quot;</span>, line <span class="m">37</span>, in <span class="n">parse_interval</span>
    <span class="n">interval_parts</span> <span class="o">=</span> <span class="n">_parse_interval_parts</span><span class="p">(</span><span class="n">isointervalstr</span><span class="p">,</span> <span class="n">intervaldelimiter</span><span class="p">,</span> <span class="n">datetimedelimiter</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/interval.py&quot;</span>, line <span class="m">89</span>, in <span class="n">_parse_interval_parts</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="n">parse_duration</span><span class="p">(</span><span class="n">firstpart</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">29</span>, in <span class="n">parse_duration</span>
    <span class="k">return</span> <span class="n">_parse_duration_prescribed</span><span class="p">(</span><span class="n">isodurationstr</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">73</span>, in <span class="n">_parse_duration_prescribed</span>
    <span class="k">raise</span> <span class="n">RelativeValueError</span><span class="p">(</span><span class="s1">&#39;Fractional months and years are not defined for relative intervals.&#39;</span><span class="p">)</span>
<span class="gr">aniso8601.exceptions.RelativeValueError</span>: <span class="n">Fractional months and years are not defined for relative intervals.</span>
</pre></div>
</div>
<p>If <code class="code docutils literal notranslate"><span class="pre">relative=True</span></code> is set without python-dateutil available, a <code class="code docutils literal notranslate"><span class="pre">RuntimeError</span></code> is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">parse_interval</span><span class="p">(</span><span class="s1">&#39;2003-01-27/P1M&#39;</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;aniso8601/interval.py&quot;</span>, line <span class="m">37</span>, in <span class="n">parse_interval</span>
    <span class="n">interval_parts</span> <span class="o">=</span> <span class="n">_parse_interval_parts</span><span class="p">(</span><span class="n">isointervalstr</span><span class="p">,</span> <span class="n">intervaldelimiter</span><span class="p">,</span> <span class="n">datetimedelimiter</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/interval.py&quot;</span>, line <span class="m">108</span>, in <span class="n">_parse_interval_parts</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="n">parse_duration</span><span class="p">(</span><span class="n">secondpart</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">29</span>, in <span class="n">parse_duration</span>
    <span class="k">return</span> <span class="n">_parse_duration_prescribed</span><span class="p">(</span><span class="n">isodurationstr</span><span class="p">,</span> <span class="n">relative</span><span class="p">)</span>
  File <span class="nb">&quot;aniso8601/duration.py&quot;</span>, line <span class="m">77</span>, in <span class="n">_parse_duration_prescribed</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;dateutil must be installed for relative duration support.&#39;</span><span class="p">)</span>
<span class="gr">RuntimeError</span>: <span class="n">dateutil must be installed for relative duration support.</span>
</pre></div>
</div>
</div>
<div class="section" id="date-and-time-resolution">
<h4>Date and time resolution<a class="headerlink" href="#date-and-time-resolution" title="Permalink to this headline">¶</a></h4>
<p>In some situations, it may be useful to figure out the resolution provided by an ISO 8601 date or time string. Two functions are provided for this purpose.</p>
<p>To get the resolution of a ISO 8601 time string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">(</span><span class="s1">&#39;11:31:14&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">TimeResolution</span><span class="o">.</span><span class="n">Seconds</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">(</span><span class="s1">&#39;11:31&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">TimeResolution</span><span class="o">.</span><span class="n">Minutes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">(</span><span class="s1">&#39;11&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">TimeResolution</span><span class="o">.</span><span class="n">Hours</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Similarly, for an ISO 8601 date string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_date_resolution</span><span class="p">(</span><span class="s1">&#39;1981-04-05&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">DateResolution</span><span class="o">.</span><span class="n">Day</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_date_resolution</span><span class="p">(</span><span class="s1">&#39;1981-04&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">DateResolution</span><span class="o">.</span><span class="n">Month</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aniso8601</span><span class="o">.</span><span class="n">get_date_resolution</span><span class="p">(</span><span class="s1">&#39;1981&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">aniso8601</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">DateResolution</span><span class="o">.</span><span class="n">Year</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="development">
<h3>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h3>
<div class="section" id="setup">
<h4>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h4>
<p>It is recommended to develop using a <a class="reference external" href="https://virtualenv.pypa.io/en/stable/">virtualenv</a>.</p>
<p>The tests require the <code class="code docutils literal notranslate"><span class="pre">relative</span></code> feature to be enabled, install the necessary dependencies using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install .[relative]
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h4>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h4>
<p>To run the unit tests, navigate to the source directory and run the tests for the python version being worked on (python2, python3):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python2 -m unittest discover aniso8601/tests/
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m unittest discover aniso8601/tests/
</pre></div>
</div>
</div>
</div>
<div class="section" id="contributing">
<h3>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h3>
<p>aniso8601 is an open source project hosted on <a class="reference external" href="https://bitbucket.org/nielsenb/aniso8601">Bitbucket</a>.</p>
<p>Any and all bugs are welcome on our <a class="reference external" href="https://bitbucket.org/nielsenb/aniso8601/issues">issue tracker</a>.
Of particular interest are valid ISO 8601 strings that don’t parse, or invalid ones that do. At a minimum,
bug reports should include an example of the misbehaving string, as well as the expected result. Of course
patches containing unit tests (or fixed bugs) are welcome!</p>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://dotat.at/tmp/ISO_8601-2004_E.pdf">ISO 8601:2004(E)</a> (Caution, PDF link)</li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Iso8601">Wikipedia article on ISO 8601</a></li>
<li><a class="reference external" href="https://groups.google.com/forum/#!topic/comp.lang.python/Q2w4R89Nq1w">Discussion on alternative ISO 8601 parsers for Python</a></li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Adauto Nóbrega.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>